{% extends 'base/base.html'%}
{% block title %} Agregar Materia {% endblock %}
{% block content %}
<form method="post">
	<div class="row">
		<div class="col-md-8">
			{% csrf_token %}
			<br><br>
			<h2>Agregar Materia</h2>
			<br>
			{{ form.as_p }}

			<div class="col-md-8">		
				<div class="form-group">

					<br>
				{% if especialidad %}
					<br>
					<h2>Seleccione la Especialidad y El A単o en que se impartira la Materia</h2>
					<br>
					<table>
						<tbody>
						<tr>
							<td></td>
							<td>Primer A単o&nbsp;&nbsp;&nbsp;</td>
							<td>Segundo A単o&nbsp;&nbsp;&nbsp;</td>
							<td>Tercer A単o&nbsp;&nbsp;&nbsp;</td>
						</tr>
							{% for esp in especialidad %}

							{% if esp.anios_especialidad == 3 %}	
							<tr>
								<td>{{esp.nombre_especialidad}}&nbsp;&nbsp;&nbsp;</td>
								<td><input  type="radio" name="1_{{	esp.codigo_especialidad }}" value="{{ esp.codigo_especialidad }}"></td>
								<td><input type="radio" name="2_{{ esp.codigo_especialidad }}" value="{{ esp.codigo_especialidad }}"></td>
								<td><input type="radio" name="3_{{ esp.codigo_especialidad }}" value="{{ esp.codigo_especialidad }}"></td>
							</tr>
							{% endif %}

							{% if esp.anios_especialidad == 2 %}	
							<tr>
								<td>{{esp.nombre_especialidad}}&nbsp;&nbsp;&nbsp;</td>
								<td><input type="radio" name="1_{{ esp.codigo_especialidad }}" value="{{ esp.codigo_especialidad }}"></td>
								<td><input type="radio" name="2_{{ esp.codigo_especialidad }}" value="{{ esp.codigo_especialidad }}"></td>
							</tr>
							{% endif %}

							{% endfor %}
						</tbody>
					</table> 
				{% endif %}
				<br>
				<br>

					<br>
					<br>
					{% if docentes and materia %}
						<h2>Selecciones Los Docentes asignados a la Materia</h2>
						<br>
						<div class="checkbox text-justify">
							{% for docente in docentes %}

							<label>
								&nbsp&nbsp&nbsp&nbsp&nbsp
								<input type="checkbox" name="docente_{{doc.dui_docente}}" onclick="cargar_grupos('{{ materia.codigo_materia }}');">
								{{docente.nombre_docente}} {{docente.apellidos_docente}}
							</label>
							<div class="docente_{{doc.dui_docente}}">
								
							</div>
							<br>
							{% endfor %}
						</div>
					{% endif %}
				</div>
			</div>
			<div>
			
			</div>
		</div>
	</div>
	<button type="submit" class="btn btn-primary">Guardar</button>
	<a href="{% url 'administrarMaterias' %}" class="btn btn-warning">Volver a la lista</a> 
</form>
<script type="text/javascript">

//	function crearGrupo()
//	{
//
//	}

function cargar_grupos(codigo_materia) {
	var codigo_materia = codigo_materia;
	$(document).ready(function(){
		$.ajax({
			url: '/into/CargarGrupos/',
			type: 'GET',
			contentType: 'json',
			data: {codigo_materia:codigo_materia},
			success: function (data) {
				console.log(data);
			},
			error: function (xhr, error, status) {

			}

		});
	});	
}



//$(':checkbox').is(':checked',select_nivel);
//	function select_nivel () {
//		alert('chequiado');
//		var varlor = '';
//		 $.ajax({
//		 	data:{'valor':varlor},
//		 	url:'{% url "CargarGrupos" %}',
//		 	type:'get',
//		 	success:function(data) {
//		 		var html="";
//		 		
//		 		html+='';
//		 		for(var i = 0; i<data.length; i++){
//
//		 			html += '<label>&nbsp;&nbsp;<input type="checkbox" name="'+data[i].pk+'">'+data[i].pk+'</label>';
//		 		}
//		 		
//		 		$('#grados').html(html); 
//		 	}
//		 	
//		 });
//	}
</script>


{% endblock %}