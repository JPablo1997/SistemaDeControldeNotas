{% extends 'base/base.html'%}
{% block title %} Agregar Materia {% endblock %}
{% block content %}
<form method="post">
	<div class="row">
		<div class="col-md-8">
			{% csrf_token %}
			<br><br>
			<h2>Agregar Materia</h2>
			<br>
			{{ form.as_p }}

			<div class="col-md-8">		
				<div class="form-group">

					<br>
				<br>
				<h2>Seleccione la Especialidad y El A単o en que se impartira la Materia</h2>
				<br>
				<table>
					<tbody>
					<tr>
						<td></td>
						<td>Primer A単o&nbsp;&nbsp;&nbsp;</td>
						<td>Segundo A単o&nbsp;&nbsp;&nbsp;</td>
						<td>Tercer A単o&nbsp;&nbsp;&nbsp;</td>
					</tr>
					{% for esp in especialidad %}

					{% if esp.anios_especialidad == 3 %}	
					<tr>
						<td>{{esp.nombre_especialidad}}&nbsp;&nbsp;&nbsp;</td>
						<td><input  type="radio" name="{{esp.codigo_especialidad}}" value="1_{{esp.codigo_especialidad}}"></td>
						<td><input type="radio" name="{{esp.codigo_especialidad}}" value="2_{{esp.codigo_especialidad}}"></td>
						<td><input type="radio" name="{{esp.codigo_especialidad}}" value="3_{{esp.codigo_especialidad}}"></td>
					</tr>
					{% endif %}

					{% if esp.anios_especialidad == 2 %}	
					<tr>
						<td>{{esp.nombre_especialidad}}&nbsp;&nbsp;&nbsp;</td>
						<td><input type="radio" name="{{esp.codigo_especialidad}}" value="1_{{esp.codigo_especialidad}}"></td>
						<td><input type="radio" name="{{esp.codigo_especialidad}}" value="2_{{esp.codigo_especialidad}}"></td>
					</tr>
					{% endif %}

					{% endfor %}
					</tbody>
				</table> 
				<br>
				<br>

					<br>
					<br>
					<h2>Selecciones Los Docentes asignados a la Materia</h2>
					<br>
					<div class="checkbox text-justify">
						{% for doc in docente %}

						<label>
							&nbsp&nbsp&nbsp&nbsp&nbsp
							<input type="checkbox" name="docente_{{doc.dui_docente}}" >
							{{doc.nombre_docente}} {{doc.apellidos_docente}}
						</label>
						<div class="docente_{{doc.dui_docente}}">
							
						</div>
						<br>
						{% endfor %}
					</div>
				</div>
			</div>
			<div>
			
			</div>
		</div>
	</div>
	<button type="submit" class="btn btn-primary">Guardar</button>
	<a href="{% url 'administrarMaterias' %}" class="btn btn-warning">Volver a la lista</a> 
</form>
<script type="text/javascript">

//	function crearGrupo()
//	{
//
//	}

$(document).ready(function(){
	$(':checkbox').prop("checked",false);
	$(':checkbox').click(function(){
		var docente = $(this).attr('name');
		var chec = '.'+docente;
		if($(':checkbox').is(':checked')){
			var valor = '';
		 $.ajax({
		 	data:{'valor':valor},
		 	url:'{% url "CargarGrupos" %}',
		 	type:'get',
		 	success:function(data) {
		 		var html="";
		 		
		 		html+='';
		 		for(var i = 0; i<data.length; i++){

		 			html += '<label>&nbsp;&nbsp;<input type="checkbox" name="'+docente+'_'+data[i].pk+'">'+data[i].pk+'</label>';
		 		}
		 		
		 		$(chec).html(html); 
		 	}
		 	
		 });	
		}
		else{
			var html=""
			$(chec).html(html);

		}
	});
});

//$(':checkbox').is(':checked',select_nivel);
//	function select_nivel () {
//		alert('chequiado');
//		var varlor = '';
//		 $.ajax({
//		 	data:{'valor':varlor},
//		 	url:'{% url "CargarGrupos" %}',
//		 	type:'get',
//		 	success:function(data) {
//		 		var html="";
//		 		
//		 		html+='';
//		 		for(var i = 0; i<data.length; i++){
//
//		 			html += '<label>&nbsp;&nbsp;<input type="checkbox" name="'+data[i].pk+'">'+data[i].pk+'</label>';
//		 		}
//		 		
//		 		$('#grados').html(html); 
//		 	}
//		 	
//		 });
//	}
</script>


{% endblock %}